!function(){function e(e){if(!r.contains("mnav"))for(var t=this;!t.classList.contains("menu");)"LI"==t.tagName&&("blur"==e.type?t.classList.remove("focus"):t.classList.add("focus")),t=t.parentElement}function t(e){r.contains("dnav")||(e.preventDefault(),i.style.height||(i.style.height=a.offsetHeight+"px"),this.parentElement.classList.toggle("focus"),this.parentElement.parentElement.classList.toggle("focus"),i.style.height=Math.max(a.offsetHeight,this.parentElement.lastChild.scrollHeight)+"px")}function n(){r.contains(m)?(r.remove(m),o.removeAttribute(l),i.removeAttribute(l),document.removeEventListener("keyup",s)):(r.add(m),o.setAttribute(l,"true"),i.setAttribute(l,"true"),document.addEventListener("keyup",s))}function s(e){27==e.keyCode&&n()}var a=document.getElementById("main-menu"),i=a.parentElement,o=document.getElementById("menu-open"),c=document.getElementById("mask"),r=document.documentElement.classList,l="aria-expanded",m="dopen";if(a&&o&&c){for(var u=0,d=i.getElementsByTagName("a"),f=i.querySelectorAll(".menu-item-has-children");u<d.length;++u)d[u].addEventListener("focus",e),d[u].addEventListener("blur",e);for(u=0;u<f.length;++u){var h=document.createElement("span"),g=document.createElement("span");g.className="menuback",g.textContent="back",g.onclick=function(){var e=this.parentElement.parentElement;e.classList.toggle("focus"),e=e.parentElement,e.classList.toggle("focus"),i.style.height=Math.max(a.offsetHeight,e.offsetHeight)+"px"},f[u].lastChild.insertAdjacentElement("afterbegin",g),h.className="menutog",h.onclick=t,f[u].insertBefore(h,f[u].lastChild),"#"==f[u].firstChild.getAttribute("href")?f[u].firstChild.onclick=t:f[u].className+=" seperate-tog"}if("ontouchstart"in window){var v=function(e){var t=this.parentNode;if(document.addEventListener("click",p),t.classList.contains("focus"))t.classList.remove("focus");else{e.preventDefault();for(var n=0;n<t.parentNode.children.length;++n)t!==t.parentNode.children[n]&&t.parentNode.children[n].classList.remove("focus");t.classList.add("focus")}},p=function(e){if(!e||!i.contains(e.target)){for(var t=0;t<f.length;++t)f[t].classList.remove("focus");document.removeEventListener("click",p)}},E=function(){var e=0;if(r.contains("dnav"))for(;e<f.length;++e)f[e].addEventListener("touchstart",v);else for(;e<f.length;++e)f[e].removeEventListener("touchstart",v)};window.addEventListener("resize",E),E()}o.onclick=n,c.onclick=n}}();