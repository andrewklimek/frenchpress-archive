!function(){function e(e){for(var t=this;!t.classList.contains("menu");)"LI"==t.tagName&&("blur"==e.type?t.classList.remove("focus"):t.classList.add("focus")),t=t.parentElement}function t(){document.body.classList.remove(a),r.removeAttribute(i),o.removeAttribute(i),document.removeEventListener("keyup",s)}function n(){document.body.classList.add(a),r.setAttribute(i,"true"),o.setAttribute(i,"true"),document.addEventListener("keyup",s)}function s(e){27===e.keyCode&&t()}var o=document.getElementById("primary-menu"),r=document.getElementById("menu-open"),c=document.getElementById("mask"),i="aria-expanded",a="mnav-open";if(o&&r&&c){for(var d=0,u=o.getElementsByTagName("a"),l=o.querySelectorAll(".menu-item-has-children > a");d<u.length;++d)u[d].addEventListener("focus",e),u[d].addEventListener("blur",e);for(d=0;d<l.length;++d){var m=document.createElement("span");m.className="menutog",m.addEventListener("click",function(){this.parentElement.classList.toggle("focus")}),l[d].parentElement.insertBefore(m,l[d].nextSibling)}if("ontouchstart"in window){var f=function(e){var t=this.parentNode;if(document.addEventListener("click",v),t.classList.contains("focus"))t.classList.remove("focus");else{e.preventDefault();for(var n=0;n<t.parentNode.children.length;++n)t!==t.parentNode.children[n]&&t.parentNode.children[n].classList.remove("focus");t.classList.add("focus")}},v=function(e){if(!e||!o.contains(e.target)){for(var t=0;t<l.length;++t)l[t].parentNode.classList.remove("focus");document.removeEventListener("click",v)}},L=function(){var e=0;if(document.body.classList.contains("dnav"))for(;e<l.length;++e)l[e].addEventListener("touchstart",f);else for(;e<l.length;++e)l[e].removeEventListener("touchstart",f)};window.addEventListener("resize",L),L()}r.onclick=n,document.getElementById("menu-close").onclick=t,c.onclick=t}}();