function mnscrl(e,t){function n(){if(r+=1/60,o=r/c,1>o){window.requestAnimationFrame(n);var t=-Math.pow(2,-10*o)+1;window.scrollTo(0,s+(e-s)*t)}else window.scrollTo(0,e)}var o,s=window.scrollY||document.documentElement.scrollTop,t=t||1500,r=0,c=Math.max(.1,Math.min(Math.abs(s-e)/t,.8));n()}!function(){function e(){for(var e=this;!e.classList.contains("menu");)"LI"==e.tagName&&e.classList.toggle("focus"),e=e.parentElement}function t(){document.body.classList.remove(l),c.removeAttribute(i),r.removeAttribute(i),document.removeEventListener("keyup",o)}function n(){document.body.classList.add(l),c.setAttribute(i,"true"),r.setAttribute(i,"true"),document.addEventListener("keyup",o)}function o(e){27===e.keyCode&&t()}function s(e){var t=0;this.hash&&(t=document.querySelector(this.hash).offsetTop),mnscrl(t),e.preventDefault()}var r=document.getElementById("primary-menu"),c=document.getElementById("menu-open"),a=document.getElementById("mask"),i="aria-expanded",l="mnav-open";if(r&&c&&a){for(var d=0,u=r.getElementsByTagName("a"),m=r.querySelectorAll(".menu-item-has-children > a");d<u.length;++d)u[d].addEventListener("focus",e),u[d].addEventListener("blur",e);for(d=0;d<m.length;++d){var f=document.createElement("span");f.className="menutog",f.addEventListener("click",function(){this.parentElement.classList.toggle("focus")}),m[d].parentElement.insertBefore(f,m[d].nextSibling)}if("ontouchstart"in window){var v=function(e){var t=this.parentNode;if(document.addEventListener("click",h),t.classList.contains("focus"))t.classList.remove("focus");else{e.preventDefault();for(var n=0;n<t.parentNode.children.length;++n)t!==t.parentNode.children[n]&&t.parentNode.children[n].classList.remove("focus");t.classList.add("focus")}},h=function(e){if(!e||!r.contains(e.target)){for(var t=0;t<m.length;++t)m[t].parentNode.classList.remove("focus");document.removeEventListener("click",h)}},L=function(){var e=0;if(document.body.classList.contains("dnav"))for(;e<m.length;++e)m[e].addEventListener("touchstart",v);else for(;e<m.length;++e)m[e].removeEventListener("touchstart",v)};window.addEventListener("resize",L),L()}c.onclick=n,document.getElementById("menu-close").onclick=t,a.onclick=t;for(var g=document.querySelectorAll('a[href^="#"]'),d=0;d<g.length;++d)g[d].addEventListener("click",s)}}();